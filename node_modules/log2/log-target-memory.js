//Stores log data in an array - used for testing. This makes it easy to assert what we are logging
class LogToMemory
{

    constructor()
    {
        this.logs = [];        
    }

    log(message)
    {
        this.logs.push({type:"log", message});
    }
    info(message)
    {
        this.logs.push({type:"info", message});
    }
    warn(message)
    {
        this.logs.push({type:"warn", message});
    }
    error(message)
    {
        this.logs.push({type:"error", message});
    }
    dumpLogs()
    {
        for(const logItem of this.logs)
        {
            console.log(`%s:%s`, logItem.type, logItem.message);
        }
    }

    getLogItem(index)
    {
        return JSON.parse(this.logs[index].message);
    }

    assertLogItem(index, assertion)
    {
        const item = this.getLogItem(index);
        assertion(item);
    }
}

module.exports = LogToMemory;