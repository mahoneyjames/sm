const LogFactory = require("./log-factory");

module.exports = function(something)
{
    const module = {};
    
    module.decorateLogWithLambdaContext = (context, commonOptionsToSet)=>{
        //TODO - cope with a *new* request coming in when there is unsaved log data? i.e. a different request id...
        //TODO - a claudia version of this, that grabs the path?
        LogFactory.setLogRecordDecorator((record)=>{
            record.setPropertyOnLogRecordData("awsRequestId", context.awsRequestId);
            record.merge(commonOptionsToSet);
        });
    }
    return module;
}